#  پروژه میان‌ترم درس آزمایشگاه اتوماسیون صنعتی

## پک شماره یک: بازی Pong آنلاین

### اعضای گروه:

* محمدرضا مومنی یزدی - [gihub link]()
* سید علی موسوی – [gihub link](https://github.com/Mousavi-SA-8002)
* محمد افضل‌زاده –  [gihub link](https://github.com/MohammadAfzalzadeh)


## معرفی پروژه

در این پروژه، یک نسخه‌ی ساده و آنلاین از بازی کلاسیک Pong پیاده‌سازی شده است. بازی قابلیت چندنفره دارد و به‌گونه‌ای طراحی شده که ورودی بازیکنان می‌تواند از طریق سخت‌افزار (برد ESP32) انجام شود، در حالی که نمایش بازی از طریق مرورگر قابل مشاهده است. ساختار پروژه به سه بخش نرم‌افزاری و یک بخش سخت‌افزاری تقسیم می‌شود:

* `backend`: منطق اصلی بازی با استفاده از TCP Socket
* `bridge`: پل ارتباطی بین frontend و backend از طریق WebSocket
* `frontend`: رابط گرافیکی در مرورگر برای مشاهده بازی
* `ESP32`: سخت‌افزار کنترلی برای اجرای دستورات بازی توسط بازیکنان


## ساختار پوشه‌ها

```
project/
│
├── software/               ← بخش نرم‌افزاری پروژه
│   ├── backend/            ← منطق بازی (Node.js + TCP)
│   ├── bridge/             ← پل ارتباطی WebSocket ↔ TCP
│   └── frontend/           ← رابط گرافیکی برای مرورگر
│
└── esp_code/               ← کدهای MicroPython برای دو برد ESP32
    ├── joystick_controller.py
    └── distance_sensor_controller.py

```

---

## راه‌اندازی پروژه (بخش نرم‌افزاری)

### 1. راه‌اندازی Backend

این بخش منطق اصلی بازی را پیاده‌سازی می‌کند و نقش سرور TCP را ایفا می‌کند.

```bash
cd software/backend
npm install
npm start
```

---

### 2. راه‌اندازی Bridge

این ماژول به عنوان واسط بین مرورگر (که از WebSocket استفاده می‌کند) و backend (که از TCP استفاده می‌کند) عمل می‌کند.

```bash
cd software/bridge
npm install
npm start
```

---

### 3. راه‌اندازی Frontend

رابط کاربری گرافیکی بازی از طریق مرورگر نمایش داده می‌شود. برای این کار از یک وب‌سرور ساده استفاده شده است.

```bash
cd software/frontend
npm install -g serve
serve -s . -l 80
```

>- در صورت اشغال بودن پورت 80 می‌توان از پورت جایگزین استفاده کرد:
>- `serve -s . -l 8080`


## راه‌اندازی پروژه - بخش ESP32 (بخش سخت‌افزاری)

### 0. پیش‌نیازها

* نصب نرم‌افزار [Thonny IDE](https://thonny.org)
* نصب MicroPython بر روی هر برد ESP32
* اتصال بردها از طریق کابل USB به رایانه

### 1. معرفی کنترلرها

در این پروژه از دو برد ESP32 به‌صورت مستقل استفاده شده است. هر برد وظیفه دریافت ورودی یک بازیکن را دارد:

* **برد اول**: کنترل بازی با استفاده از **joystick آنالوگ**
* **برد دوم**: کنترل بازی با استفاده از **سنسور تشخیص فاصله (ultrasonic)**

### 2. آپلود کدها

در پوشه `esp_code/` دو فایل با عناوین زیر وجود دارند:

* `joystick_controller.py` – برای برد اول
* `distance_sensor_controller.py` – برای برد دوم

### 3. عملکرد

هر ESP32 پس از اتصال به شبکه Wi-Fi و اجرای کد، به bridge متصل می‌شود و با ارسال دستورات کنترلی بازی را برای بازیکن مربوطه کنترل می‌کند.


## نکات مهم

* **مشاهده بازی فقط از طریق مرورگر امکان‌پذیر است.**
* **کنترل بازی فقط از طریق ESP32ها انجام می‌شود.**
* برای تست بهتر، هر برد ESP32 را جداگانه متصل و راه‌اندازی کنید.
* اطمینان حاصل شود که همه‌ی بخش‌ها به یک شبکه Wi-Fi متصل باشند.

## تصویر esp ها 

![espimages](./board.jpg)

## جمع‌بندی

این پروژه نمونه‌ای از ترکیب نرم‌افزار تحت وب با سخت‌افزار تعاملی است که توانسته یک بازی کلاسیک را به صورت دو‌ نفره و تعاملی بازآفرینی کند. هدف اصلی پروژه، یادگیری نحوه‌ی برقراری ارتباط بین اجزای مختلف نرم‌افزار و سخت‌افزار در قالب یک سیستم کامل و عملیاتی بوده است.


